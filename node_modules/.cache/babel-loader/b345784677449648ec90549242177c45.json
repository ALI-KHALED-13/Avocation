{"ast":null,"code":"var _jsxFileName = \"D:\\\\ali\\\\programming\\\\React\\\\avocation\\\\client\\\\src\\\\Components\\\\HomeComponents\\\\Avocata.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport mavatar from '../../media/avatar-m.png';\nimport favatar from '../../media/avatar-f.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Avocata = ({\n  data,\n  users,\n  user,\n  avocatas,\n  updataAvocatas\n}) => {\n  _s();\n\n  const [fileURL, setFileURL] = useState(''); // will use it for revoking (performance)\n\n  const author = users.find(user => user.userName === data.creator);\n  const mediaType = data.contentType;\n\n  const insertMedia = () => {\n    const arrayBuffer = toArrayBuffer(data.fileBuffer.data);\n    const file = new File([arrayBuffer], data.fileName, {\n      type: mediaType\n    });\n    const fileURL = URL.createObjectURL(file);\n    setFileURL(fileURL);\n\n    if (mediaType.startsWith('image/')) {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"data.fileName\",\n        src: fileURL,\n        className: \"media\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"audio\", {\n        controls: true,\n        className: \"media\",\n        children: /*#__PURE__*/_jsxDEV(\"source\", {\n          src: fileURL,\n          type: \"audio/mpeg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  function toArrayBuffer(buffer) {\n    //useMemo IT ???\n    var ab = new ArrayBuffer(buffer.length);\n    var view = new Uint8Array(ab);\n\n    for (var i = 0; i < buffer.length; ++i) view[i] = buffer[i];\n\n    return ab;\n  }\n\n  const deleteAvoca = ev => {\n    fetch('avocata', {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: data._id\n      })\n    }).then(resp => resp.json()).then(message => {\n      if (message.deleted) {\n        updataAvocatas(avocatas.filter(avoca => avoca !== data));\n        URL.revokeObjectURL(fileURL);\n        alert('avocata is deleted successfully');\n      } else {\n        alert(\"couldn't be deleted\");\n        console.log(message.error);\n      }\n    }).catch(console.log);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"avocata\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: author.gender === 'male' ? mavatar : favatar,\n        alt: \"avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [author.name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"date-created\",\n          children: data.createdAt.slice(0, 10)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), user.userName === author.userName && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteAvoca,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 54\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          textAlign: data.text.match(/\\w/) ? 'left' : 'center'\n        },\n        children: data.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), mediaType !== 'undefined' && insertMedia()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Avocata, \"ZQZWbFWTIhHXLP/hBLeLgMpo0C0=\");\n\n_c = Avocata;\nexport default _c2 = /*#__PURE__*/React.memo(Avocata);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Avocata\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["D:/ali/programming/React/avocation/client/src/Components/HomeComponents/Avocata.js"],"names":["React","useState","mavatar","favatar","Avocata","data","users","user","avocatas","updataAvocatas","fileURL","setFileURL","author","find","userName","creator","mediaType","contentType","insertMedia","arrayBuffer","toArrayBuffer","fileBuffer","file","File","fileName","type","URL","createObjectURL","startsWith","buffer","ab","ArrayBuffer","length","view","Uint8Array","i","deleteAvoca","ev","fetch","method","headers","body","JSON","stringify","id","_id","then","resp","json","message","deleted","filter","avoca","revokeObjectURL","alert","console","log","error","catch","gender","name","createdAt","slice","textAlign","text","match","memo"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport mavatar from '../../media/avatar-m.png';\r\nimport favatar from '../../media/avatar-f.png';\r\n\r\nconst Avocata =({data, users, user, avocatas, updataAvocatas})=>{\r\n    const [fileURL, setFileURL] = useState(''); // will use it for revoking (performance)\r\n    const author = users.find(user=> user.userName === data.creator);\r\n    const mediaType = data.contentType;\r\n\r\n    const insertMedia =()=>{\r\n        const arrayBuffer = toArrayBuffer(data.fileBuffer.data)\r\n        const file = new File([arrayBuffer], data.fileName, {type: mediaType});\r\n        const fileURL = URL.createObjectURL(file);\r\n        setFileURL(fileURL);\r\n        if (mediaType.startsWith('image/')){\r\n            return <img alt=\"data.fileName\" src={fileURL} className=\"media\"/>\r\n        }else {\r\n            return (\r\n                <audio controls className=\"media\">\r\n                    <source src={fileURL} type=\"audio/mpeg\"></source>\r\n                </audio>\r\n                )\r\n        }\r\n    }\r\n    function toArrayBuffer(buffer) { //useMemo IT ???\r\n        var ab = new ArrayBuffer(buffer.length);\r\n        var view = new Uint8Array(ab);\r\n        for (var i = 0; i < buffer.length; ++i) view[i] = buffer[i];\r\n        return ab;\r\n    }\r\n    \r\n    const deleteAvoca =(ev)=>{\r\n        fetch('avocata', {\r\n            method:\"delete\",\r\n            headers: {\"Content-Type\": \"application/json\"},\r\n            body: JSON.stringify({id: data._id}),\r\n        })\r\n        .then(resp=> resp.json())\r\n        .then(message=> {\r\n            if (message.deleted){\r\n                updataAvocatas(avocatas.filter(avoca=> avoca !== data));\r\n                URL.revokeObjectURL(fileURL);\r\n                alert('avocata is deleted successfully');  \r\n            }else{\r\n                alert(\"couldn't be deleted\")\r\n                console.log(message.error);\r\n            }\r\n        }).catch(console.log)\r\n    }\r\n\r\n    return (\r\n        <article className=\"avocata\">\r\n            <div className=\"header\">\r\n                <img src={author.gender === 'male'? mavatar: favatar} alt=\"avatar\"/>\r\n\r\n                <p>{author.name}<br/>\r\n                <span className=\"date-created\">{data.createdAt.slice(0,10)}</span>\r\n                </p>\r\n\r\n                {user.userName === author.userName &&<button onClick={deleteAvoca}>Delete</button>}\r\n            </div>\r\n            <div className=\"content\">\r\n                <pre style={{textAlign: data.text.match(/\\w/)? 'left':'center'}}>{data.text}</pre>\r\n                {\r\n                  mediaType !== 'undefined' &&  insertMedia()\r\n                }\r\n            </div>\r\n        </article>\r\n    );\r\n}\r\nexport default React.memo(Avocata);\r\n\r\n"]},"metadata":{},"sourceType":"module"}