{"ast":null,"code":"var _jsxFileName = \"D:\\\\ali\\\\programming\\\\React\\\\avocation\\\\client\\\\src\\\\Components\\\\SubComponents\\\\AvocataForm.js\",\n    _s = $RefreshSig$();\n\nimport mavatar from '../../media/avatar-m.png';\nimport favatar from '../../media/avatar-f.png';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TagInput = /*#__PURE__*/React.lazy(_c = () => import('../SubComponents/TagInput'));\n_c2 = TagInput;\n\nconst AvocataForm = ({\n  user\n}) => {\n  _s();\n\n  const [savedTags, setSavedTags] = useState([\"DRWAING\", \"SINGING\", \"POETRY\"]);\n  const [addedTags, setAddedTags] = useState([]);\n  const [uploaded, setUploaded] = useState(false);\n  const fileInput = useRef(null);\n\n  const saveTag = tagTxt => {\n    if (this.state.savedTags.indexOf(tagTxt) === -1) setSavedTags([...this.state.savedTags, tagTxt]);\n  };\n\n  useEffect(() => {\n    if (user) {\n      fileInput.current.addEventListener('change', ev => {\n        let file = ev.target.files[0];\n        if (!file) return;\n\n        if (!file.type.startsWith('image/') && file.type !== \"audio/mpeg\") {\n          alert('please upload an image or mp3 file only');\n          ev.target.value = null;\n          setUploaded(false);\n        } else if (file.size / 1048576 > 8) {\n          alert('file size it too big, files below 8MB only');\n          ev.target.value = null;\n          setUploaded(false);\n        } else {\n          setUploaded(true);\n        }\n      });\n    }\n  }, [user]);\n\n  const submitAvocata = ev => {\n    ev.preventDefault();\n    const form = new FormData(ev.target);\n    form.append('hobbies', this.state.addedTags.join(' '));\n    fetch('/avocata', {\n      method: \"POST\",\n      body: form\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: submitAvocata,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"avatar\",\n        src: this.user.gender === 'male' ? mavatar : favatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.user.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"content/caption\",\n      required: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(React.Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 39\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(TagInput, {\n        savedTags: savedTags,\n        saveTag: saveTag,\n        addedTags: addedTags,\n        setAddedTags: setAddedTags\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), uploaded && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"fileData\",\n      children: fileInput.current.files[0].name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      id: \"upload\",\n      children: [\" Upload image/mp3\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*,audio/mpeg\",\n        ref: this.fileInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Publish\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AvocataForm, \"bvCIP2iQmrXTxNmqGbuB8sPagy4=\");\n\n_c3 = AvocataForm;\nexport default AvocataForm;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"TagInput$React.lazy\");\n$RefreshReg$(_c2, \"TagInput\");\n$RefreshReg$(_c3, \"AvocataForm\");","map":{"version":3,"sources":["D:/ali/programming/React/avocation/client/src/Components/SubComponents/AvocataForm.js"],"names":["mavatar","favatar","React","useEffect","useRef","useState","TagInput","lazy","AvocataForm","user","savedTags","setSavedTags","addedTags","setAddedTags","uploaded","setUploaded","fileInput","saveTag","tagTxt","state","indexOf","current","addEventListener","ev","file","target","files","type","startsWith","alert","value","size","submitAvocata","preventDefault","form","FormData","append","join","fetch","method","body","gender","name"],"mappings":"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","sourcesContent":["import mavatar from '../../media/avatar-m.png';\r\nimport favatar from '../../media/avatar-f.png';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nconst TagInput = React.lazy(()=> import('../SubComponents/TagInput'));\r\n\r\nconst AvocataForm =({user})=>{\r\n    const [savedTags, setSavedTags] = useState([\"DRWAING\", \"SINGING\", \"POETRY\"]);\r\n    const [addedTags, setAddedTags] = useState([]);\r\n    const [uploaded, setUploaded] = useState(false);\r\n    const fileInput = useRef(null);\r\n\r\n    const saveTag =(tagTxt)=>{\r\n        if (this.state.savedTags.indexOf(tagTxt) === -1) setSavedTags([...this.state.savedTags, tagTxt]);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if (user){\r\n            fileInput.current.addEventListener('change', (ev)=>{\r\n                let file = ev.target.files[0];\r\n                if (!file) return;\r\n                if (!file.type.startsWith('image/') && file.type !== \"audio/mpeg\"){\r\n                    alert('please upload an image or mp3 file only')\r\n                    ev.target.value = null;\r\n                    setUploaded(false);\r\n\r\n                } else if (file.size/1048576 > 8) {\r\n                    alert('file size it too big, files below 8MB only');\r\n                    ev.target.value = null;\r\n                    setUploaded(false);\r\n                } else {\r\n                    setUploaded(true);\r\n                }\r\n                \r\n            });\r\n        }\r\n    }, [user])\r\n\r\n    const submitAvocata =(ev)=>{\r\n        ev.preventDefault();\r\n        const form = new FormData(ev.target);\r\n        form.append('hobbies', this.state.addedTags.join(' '));\r\n        \r\n        fetch('/avocata', {\r\n            method: \"POST\",\r\n            body: form,\r\n        })\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={submitAvocata}>\r\n            <div className=\"header\">\r\n                <img alt=\"avatar\" src={this.user.gender === 'male'? mavatar: favatar}/>\r\n                <p>{this.user.name}</p>\r\n            </div>\r\n\r\n            <textarea placeholder=\"content/caption\" required/>\r\n\r\n            <React.Suspense fallback={<div>loading...</div>}>\r\n                <TagInput \r\n                    savedTags={savedTags} \r\n                    saveTag={saveTag} \r\n                    addedTags={addedTags} \r\n                    setAddedTags={setAddedTags}\r\n                />\r\n            </React.Suspense>\r\n\r\n            {uploaded && \r\n                <span className=\"fileData\">{fileInput.current.files[0].name}</span>\r\n            }\r\n            <label id=\"upload\"> Upload image/mp3\r\n                <input type=\"file\" accept=\"image/*,audio/mpeg\" ref={this.fileInput} />\r\n            </label>\r\n            <button>Publish</button>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default AvocataForm;"]},"metadata":{},"sourceType":"module"}